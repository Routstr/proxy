# Nostr relay configuration

relay {
    # Interface to listen on
    bind = "0.0.0.0"
    
    # Port to listen on
    port = 8080
    
    # Websocket realIP header
    realIpHeader = ""
    
    info {
        # NIP-11 relay info
        # name = "routstr-relay"
        # description = "Nostr relay for routstr.com"
        # pubkey = "8bf629b3d519a0f8a8390137a445c0eb2f5f2b4a8ed71151de898051e8006f13"
        # contact = "mailto:team@routstr.com"
        # icon = "https://routstr.com/favicon.ico"
    }
    
    # Maximum number of pending connections
    maxConnections = 1000
    
    # Maximum websocket message size
    maxMessageSize = 16777215  # ~16MB
    
    # Websocket compression
    compression {
        enabled = true
        
        # Sliding window size
        slidingWindow = true
    }
    
    logging {
        # Directory to store log files
        dir = ""
    }
    
    numThreads {
        # Ingester threads
        ingester = 3
        
        # ReqWorker threads
        reqWorker = 3
        
        # ReqMonitor threads
        reqMonitor = 3
    }
    
    # Options for ingestion of events
    events {
        # Maximum size of normalised JSON event
        maxEventSize = 65536  # 64KB
        
        # Events newer than this will be rejected
        rejectEventsNewerThanSeconds = 900  # 15 min
        
        # Events older than this will be rejected
        rejectEventsOlderThanSeconds = 94608000  # 3 years
        
        # Ephemeral event retention time
        rejectEphemeralEventsOlderThanSeconds = 300  # 5 min
        
        # Require AUTH for event publishing
        requirePowForEvents = 0
        
        # Pubkey whitelist (empty = accept all)
        pubkeyWhitelist = []
    }
}

# Write policy plugin (optional)
writePolicy {
    # Plugin executable path
    plugin = ""
} 